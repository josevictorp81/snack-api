{% extends 'base.html' %} {% load static %}{% block css %}
<link rel="stylesheet" href="{% static 'css/form_snack.css' %}" />
<link rel="stylesheet" href="{% static 'css/delete_modal.css' %}" />
{% endblock %} {% block content %}

<div class="form">
    {% if snack_edit %}
    <form action="{% url 'edit-snack' snack_edit.id %}" method="POST">
    {% else %}
    <form action="{% url 'create-snack' %}" method="POST">
    {% endif %}
        {% csrf_token %}
        <div class="title">
            {% if snack_edit %}
            <h2>Atualizar Lanche</h2>
            {% else %}
            <h2>Cadastrar Lanche</h2>
            {% endif %}
        </div>
        <div class="form-fields">
            {% if snack_edit %}
            <label for="name" class="label-input">Nome</label>
            <input
                type="text"
                id="name"
                name="name"
                class="input-name"
                placeholder="Ex: Suco..."
                value="{{ snack_edit.name }}"
                required
            />

            <label for="price" class="label-input">Preço</label>
            <input
                type="number"
                min="0"
                max="100"
                step="0.1"
                id="price"
                name="price"
                class="input-price"
                placeholder="R$ 0.0"
                value="{{ snack_edit.price }}"
                required
            />

            <label for="available" class="label-input">Status</label>
            <select
                name="available"
                id="available"
                class="input-select"
                required
            >   
                {% if snack_edit.available %}
                <option value="">Escolha</option>
                <option selected value="true">Disponível</option>
                <option value="false">Não Disponível</option>
                {% else %}
                <option value="">Escolha</option>
                <option value="true">Disponível</option>
                <option selected value="false">Não Disponível</option>
                {% endif %}
            </select>
            {% else %}
            <label for="name" class="label-input">Nome</label>
            <input
                type="text"
                id="name"
                name="name"
                class="input-name"
                placeholder="Ex: Suco..."
                required
            />

            <label for="price" class="label-input">Preço</label>
            <input
                type="number"
                min="0"
                max="100"
                step="0.01"
                id="price"
                name="price"
                class="input-price"
                placeholder="R$ 0.0"
                required
            />

            <label for="available" class="label-input">Status</label>
            <select
                name="available"
                id="available"
                class="input-select"
                required
            >
                <option value="">Escolha</option>
                <option value="true">Disponível</option>
                <option value="false">Não Disponível</option>
            </select>
            {% endif %}
        </div>
        <div class="form-fields">
            <button type="submit">Cadastrar</button>
        </div>
    </form>
</div>

{% if messages %}
<div class="messages">
    {% for message in messages %}
    <span {% if message.tags %} class="{{ message.tags }}" {% endif %}>
        {{ message }}
    </span>
    {% endfor %}
</div>
{% endif %}
{% if snack_edit %}
<div class="modal">
    <button
        type="button"
        class="modal-delete__button"
        onclick="deleteModal('open')"
    >
        Deletar Lanche
    </button>

    <div class="box">
        <div class="modal-box">
            <h2 class="modal-title">Deletar Lanche</h2>
            <div class="modal-content">
                <span class="modal-content__item">
                    <strong>Nome:</strong>
                    {{ snack_edit.name }}
                </span>
                <span class="modal-content__item">
                    <strong>Preço:</strong>
                    {{ snack_edit.price }}
                </span>
                <span class="modal-content__item">
                    <strong>Preço:</strong>
                    {% if snack_edit.available %}
                    Disponível
                    {% else %}
                    Não Disponível
                    {% endif %}
                </span>
                <span class="modal-content__item">
                    Você tem certeza que deseja deletar este lanche?
                </span>
                <div>
                    <form
                        action="{% url 'delete-snack' snack_edit.id %}"
                        method="POST"
                    >
                        {% csrf_token %}
                        <button
                            class="modal-btn modal-btn__confirm"
                            type="submit"
                        >
                            Sim
                        </button>
                        <button
                            type="button"
                            onclick="deleteModal('close')"
                            class="modal-btn modal-btn__cancel"
                        >
                            Não
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %} 
{% endblock %}
